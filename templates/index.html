
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interactivo de Eventos</title>
    <!-- Tailwind CSS CDN (se mantiene para clases de utilidad y responsive) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Leaflet CSS (SRI y crossorigin eliminados para depuración) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        /* La fuente Helvetica se define en style.css */
    </style>
</head>
<body>
    <header>
        <h1>Mapa Interactivo de Eventos de Tecnología y Startups</h1>
    </header>

    <main class="container flex-grow flex flex-col lg:flex-row gap-6">
        <!-- Panel de Filtros y Análisis -->
        <div class="card w-full lg:w-1/3 flex flex-col h-auto lg:h-[calc(100vh-160px)]">
            <h2>Filtrar Eventos</h2>

            <div class="space-y-4 mb-6">
                <!-- Nuevo desplegable para seleccionar Startup -->
                <div>
                    <label for="startupNameFilter">Seleccionar Startup:</label>
                    <select id="startupNameFilter" class="select-field">
                        <option value="">Selecciona una Startup</option>
                        <!-- Las opciones se cargarán dinámicamente con JavaScript -->
                    </select>
                </div>
                <!-- Desplegable existente para seleccionar Evento -->
                <div>
                    <label for="eventNameFilter">Seleccionar Evento:</label>
                    <select id="eventNameFilter" class="select-field">
                        <option value="">Todos los eventos</option>
                        <!-- Las opciones se cargarán dinámicamente con JavaScript -->
                    </select>
                </div>
                <button id="filterBtn" class="btn-primary">
                    Aplicar Filtro
                </button>
                <button id="resetBtn" class="btn-secondary">
                    Restablecer Filtro
                </button>
            </div>

            <h2 class="mt-auto">Análisis de Evento</h2>
            <div id="geminiAnalysis" class="card flex-grow max-h-[300px] lg:max-h-full">
                <p>Selecciona una startup y haz clic en un marcador de evento en el mapa para obtener un análisis sobre su relevancia.</p>
                <div id="loadingIndicator" class="hidden text-center mt-4">
                    <svg class="animate-spin h-5 w-5 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p>Cargando análisis...</p>
                </div>
            </div>
        </div>

        <!-- Contenedor del Mapa -->
        <div id="map" class="w-full lg:w-2/3 h-[500px] lg:h-[calc(100vh-160px)]"></div>
    </main>

    <footer>
        &copy; 2025 Mapa de Eventos.
    </footer>

    <!-- Leaflet JS (SRI y crossorigin eliminados para depuración) -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>




